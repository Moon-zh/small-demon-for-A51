CS1	EQU	P2.5
CS2	EQU	P2.6
E	EQU	P2.7
AJ	EQU	P3
C0	EQU	P3.3
C1	EQU	P3.2
C2	EQU	P3.1
C3	EQU	P3.0
SMG	EQU	P0


DS0	EQU	30H
DS1	EQU	31H
DS2	EQU	32H
DS3	EQU	33H
DS4	EQU	34H
DS5	EQU	35H
DS6	EQU	36H
DS7	EQU	37H

AJBZ	EQU	38H
DBZ	BIT	20H.0
	ORG	00H
	AJMP	MAIN
	ORG	30H
MAIN:	MOV	SP,#80H
	CLR	DBZ
	MOV	40H,#0FFH
	MOV	R0,#30H
	MOV	B,#8
MA1:	MOV	@R0,#10
	INC	R0
	DJNZ	B,MA1

MAI:	LCALL	MY
	LCALL	AJPD
	AJMP	MAI

AJPD:	MOV	AJ,#7FH
	JNB	C0,AJ1
	JNB	C1,AJ2
	JNB	C2,AJ3
	JNB	C3,AJ4
	MOV	AJ,#0BFH
	JNB	C0,AJ5
	JNB	C1,AJ6
	JNB	C2,AJ7
	JNB	C3,AJ8
	MOV	AJ,#0DFH
	JNB	C0,AJ9
	JNB	C1,AJ0
	MOV	AJ,#0EFH
	JNB	C3,AJD
	RET
AJ1:	JNB	C0,$
	MOV	AJBZ,#1
	LCALL	SMXS
	RET
AJ2:	JNB	C1,$
	MOV	AJBZ,#2
	LCALL	SMXS
	RET
AJ3:	JNB	C2,$
	MOV	AJBZ,#3
	LCALL	SMXS
	RET
AJ4:	JNB	C3,$
	MOV	AJBZ,#4
	LCALL	SMXS
	RET
AJ5:	JNB	C0,$
	MOV	AJBZ,#5
	LCALL	SMXS
	RET
AJ6:	JNB	C1,$
	MOV	AJBZ,#6
	LCALL	SMXS
	RET
AJ7:	JNB	C2,$
	MOV	AJBZ,#7
	LCALL	SMXS
	RET
AJ8:	JNB	C3,$
	MOV	AJBZ,#8
	LCALL	SMXS
	RET
AJ9:	JNB	C0,$
	MOV	AJBZ,#9
	LCALL	SMXS
	RET
AJ0:	JNB	C1,$
	MOV	AJBZ,#0
	LCALL	SMXS
	RET
AJD:	JNB	C3,$
	SETB	DBZ
	MOV	40H,#DS0
	RET


SMXS:	MOV	A,DS0
	MOV	R0,#DS1
	MOV	B,#7
SM11:	XCH	A,@R0
	INC	R0
	DJNZ	B,SM11
	MOV	DS0,AJBZ
	LCALL	MY
	JNB	DBZ,SM12
	INC	40H
	MOV	A,40H
	CJNE	A,#38H,SM12
	MOV	40H,#DS0
SM12:
	RET




MY:	MOV	DPTR,#TAB
	MOV	R1,#DS0
	MOV	R2,#0FEH
MA:	MOV	A,@R1
	MOVC	A,@A+DPTR
	PUSH	ACC
	JNB	DBZ,MAA	
	MOV	A,R1
	CJNE	A,40H,MAA
	POP	ACC
	ANL	A,#7FH
	PUSH	ACC
MAA:	POP	ACC
	INC	R1
	MOV	SMG,A
	CLR	E
	CLR	CS1
	SETB	E
	SETB	CS1
	MOV	A,R2
	MOV	SMG,A
	RL	A
	MOV	R2,A
	CLR	E
	CLR	CS2
	SETB	E
	SETB	CS2
	LCALL	SMYS
	LCALL	SMQP
	CJNE	R1,#38H,MA
	RET
SMYS:	MOV	R3,#0FFH
	DJNZ	R3,$
	RET
SMQP:	MOV	SMG,#0FFH
	CLR	E
	CLR	CS1
	SETB	E
	SETB	CS1
	CLR	E
	CLR	CS2
	SETB	E
	SETB	CS2
	RET
TAB:DB	0C0H,0F9H,0A4H,0B0H,99H,92H,82H,0F8H,80H,90H,0FFH
	END
