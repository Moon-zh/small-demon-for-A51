CS2	EQU	P2.3
CS1	EQU	P2.4
E	EQU	P2.5
RS	EQU	P2.6
XD	EQU	30H
YD	EQU	31H
ZS	EQU	32H
CISHU	EQU	33H
BZ	EQU	34H
TB1	EQU	35H
TB2	EQU	36H
ZSZJ	EQU	37H
XJ	EQU	38H
SZ	EQU	3AH
HBZ	EQU	3BH(在哪里'或'线)
XD1	EQU	3FH(XD中转)
XBZ	EQU	3EH(是否'或'线)
	ORG	00H
	AJMP	MAIN
	ORG	30H
MAIN:	MOV	SP,#80H
	MOV	SZ,#0
	MOV	HBZ,#0
	MOV	XBZ,#0
	LCALL	LCD_INIT
	;LCALL	YJCS
	;;LCALL	YS05S
	;LCALL	YS05S
	LCALL	LCD_INIT
	MOV	XBZ,#1
	LCALL	YJG
	LCALL	YJSZ
	AJMP	$










YJGY1:	MOV	ZS,#1
	MOV	B,#16
	MUL	AB
	MOV	TB1,A
	MOV	TB2,#8
	MOV	CISHU,#8
	SETB	CS1
	CLR	CS2
	LCALL	XIECX
	RET

YJSZ:	MOV	DPTR,#TABSZ
	MOV	XD,#0B8H
	MOV	YD,#74H
	MOV	A,#0
	LCALL	YJGY1
	MOV	XD,#0B8H
	MOV	YD,#44H
	MOV	A,SZ
	MOV	B,#100
	DIV	AB
	MOV	60H,B
	LCALL	YJGY1
	MOV	XD,#0B8H
	MOV	YD,#54H
	MOV	A,60H
	MOV	B,#10
	DIV	AB
	MOV	61H,B
	LCALL	YJGY1
	MOV	XD,#0B8H
	MOV	YD,#64H
	MOV	A,61H
	LCALL	YJGY1
	RET
YJG:	MOV	A,#0C0H
	LCALL	XIEZL
	SETB	CS1
	CLR	CS2
	MOV	XD1,#0B8H
	LCALL	YJH
	MOV	XD1,#0BAH
	LCALL	YJH
	MOV	XD1,#0BCH
	LCALL	YJH
	MOV	XD1,#0BEH
	LCALL	YJH
	LCALL	MM
	RET
MM:	MOV	YD,#40H
	LCALL	YJH1
	MOV	YD,#50H
	LCALL	YJH1
	MOV	YD,#60H
	LCALL	YJH1
	MOV	YD,#70H
	LCALL	YJH1
	MOV	YD,#7FH
	LCALL	YJH1
	RET

YJH:	MOV	XJ,#1
	MOV	XD,XD1
	LCALL	QY
M2:	MOV	A,#1H
	LCALL	XIESJ
	DJNZ	CISHU,M2
	INC	XD
	LCALL	QY
M1:	MOV	A,#80H
	LCALL	XIESJ
	DJNZ	CISHU,M1
	RET
		
QY:	MOV	A,XD
	LCALL	XIEZL
	MOV	YD,#40H
	LCALL	XIEZL
	MOV	CISHU,#64
	RET

YJH1:	MOV	XJ,#8
	MOV	XD,#0B8H
M3:	MOV	A,XD
	LCALL	XIEZL
	MOV	A,YD
	LCALL	XIEZL
	MOV	CISHU,#1
M4:	MOV	A,#0FFH
	LCALL	XIESJ
	DJNZ	CISHU,M4
	INC	XD
	DJNZ	XJ,M3
	RET
	

YJCS:	SETB	CS1
	CLR	CS2
	MOV	R1,#2
YJ3:	MOV	XJ,#1
	MOV	XD,#0BCH
	MOV	YD,#40H
	MOV	B,#8
YJ1:	MOV	A,XD
	LCALL	XIEZL
	MOV	A,YD
	LCALL	XIEZL
	MOV	CISHU,#8
YJ2:	MOV	A,#0FFH
	LCALL	XIESJ
	DJNZ	CISHU,YJ2
	MOV	A,SZ
	ADD	A,#6
	MOV	SZ,A
	PUSH	B
	PUSH	P2
	PUSH	YD
	PUSH	XD
	LCALL	YJSZ
	POP	XD
	POP	YD
	POP	P2
	POP	B
	LCALL	YS05S
	MOV	A,YD
	ADD	A,#8
	MOV	YD,A
	DJNZ	B,YJ1
	SETB	CS2
	CLR	CS1
	DJNZ	R1,YJ3
	MOV	SZ,#100
	LCALL	YJSZ
	RET
YS05S:	MOV	R5,#4
Y1:	MOV	R6,#250
Y2:	MOV	R7,#250
	DJNZ	R7,$
	DJNZ	R6,Y2
	DJNZ	R5,Y1
	RET
XIECX:	MOV	39H,TB1
	MOV	BZ,#0
	MOV	A,#0C0H
	LCALL	XIEZL
	MOV	XJ,#2
	MOV	50H,XJ
	MOV	40H,#1
	MOV	ZSZJ,ZS
TU1:	MOV	A,XD
	LCALL	XIEZL
	MOV	A,YD
	LCALL	XIEZL
	MOV	51H,CISHU
TU2:	MOV	A,TB1
	MOVC	A,@A+DPTR
	MOV	3DH,A
	MOV	A,XBZ
	CJNE	A,#1,TUC1
	MOV	A,XJ
	CJNE	A,#2,TU5
	MOV	A,3DH
	ORL	A,#1H
	AJMP	TUC
TUC1:	MOV	A,3DH
	AJMP	TUC
TU5:	MOV	A,3DH
	ORL	A,#80H
TUC:	INC	TB1
	LCALL	XIESJ
	DJNZ	51H,TU2
	MOV	A,ZS
	CJNE	A,#1,TU3
	AJMP	TU4
TU3:	MOV	A,50H
	MOV	B,40H
	MUL	AB
	ADD	A,BZ
	MOV	B,CISHU
	MUL	AB
	ADD	A,39H
	MOV	TB1,A
TU4:	MOV	51H,CISHU
	INC	40H
	DJNZ	ZSZJ,TU2
	INC	XD
	MOV	ZSZJ,ZS
	MOV	40H,#1
	INC	BZ
	MOV	A,BZ
	MOV	B,TB2
	MUL	AB
	ADD	A,39H
	MOV	TB1,A
	DJNZ	XJ,TU1
	RET
LCD_INIT:	
	SETB	CS1
	SETB	CS2
	MOV	A,#3FH
	LCALL	XIEZL
	LCALL	QP
	RET
QP:	MOV	XJ,#8
	MOV	XD,#0B8H
QP1:	MOV	A,XD
	LCALL	XIEZL
	MOV	A,#40H
	LCALL	XIEZL
	MOV	CISHU,#64
QP2:	MOV	A,#0
	LCALL	XIESJ
	DJNZ	CISHU,QP2
	INC	XD
	DJNZ	XJ,QP1
	RET
XIEZL:	CLR	E
	CLR	RS
	MOV	P0,A
	SETB	E
	CLR	E
	RET
XIESJ:	CLR	E
	SETB	RS
	MOV	P0,A
	SETB	E
	CLR	E
	RET
TABSZ:	;--  文字:  0  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,0E0H,010H,008H,008H,010H,0E0H,000H,000H,00FH,010H,020H,020H,010H,00FH,000H

;--  文字:  1  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,010H,010H,0F8H,000H,000H,000H,000H,000H,020H,020H,03FH,020H,020H,000H,000H

;--  文字:  2  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,070H,008H,008H,008H,088H,070H,000H,000H,030H,028H,024H,022H,021H,030H,000H

;--  文字:  3  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,030H,008H,088H,088H,048H,030H,000H,000H,018H,020H,020H,020H,011H,00EH,000H

;--  文字:  4  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,000H,0C0H,020H,010H,0F8H,000H,000H,000H,007H,004H,024H,024H,03FH,024H,000H

;--  文字:  5  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,0F8H,008H,088H,088H,008H,008H,000H,000H,019H,021H,020H,020H,011H,00EH,000H

;--  文字:  6  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,0E0H,010H,088H,088H,018H,000H,000H,000H,00FH,011H,020H,020H,011H,00EH,000H

;--  文字:  7  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,038H,008H,008H,0C8H,038H,008H,000H,000H,000H,000H,03FH,000H,000H,000H,000H

;--  文字:  8  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,070H,088H,008H,008H,088H,070H,000H,000H,01CH,022H,021H,021H,022H,01CH,000H

;--  文字:  9  --
;--  新宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,0E0H,010H,008H,008H,010H,0E0H,000H,000H,000H,031H,022H,022H,011H,00FH,000H

	END