RS		EQU		P1.0
RW		EQU		P1.1
E		EQU		P1.2
		ORG		00H
		AJMP	MAIN
		ORG		30H
MAIN:	MOV		SP,#80H
		CLR		A
		CLR		E
		LCALL	LCD_INIT
MAI:	MOV		A,#1
		LCALL	XIEZL
		MOV		A,#90H；选择开始写入位置（第一行结束点）
		LCALL	XIEZL
		MOV		DPTR,#TABL1；取表
		LCALL	XRWC；使写入完成
		MOV		A,#0D0H；选择开始写入位置（第二行结束点）
		LCALL	XIEZL
		MOV		DPTR,#TABL2
		LCALL	XRWC；此时两行的写入结束
		MOV		R3,#10H；左移16格
MAI1:	MOV		A,#18H；字符左移一格
		LCALL	XIEZL
		MOV		R5,#3
		LCALL	YS125MS
		DJNZ	R3,MAI1
		LCALL	YS800MS
		LCALL	YS800MS
		MOV		R4,#2
		LCALL	CSSZ；闪烁
		AJMP	MAI
TABL1:	DB	"1602",00H
TABL2:	DB	"I'm worry",00H

LCD_INIT:；初始化
		LCALL	YS5MS
		LCALL	YS5MS
		LCALL	YS5MS
		MOV		B,#3
IN1:		MOV		A,#3CH
		LCALL	XIEZL
		LCALL	YS5MS
		DJNZ	B,IN1
		MOV		A,#38H
		LCALL	XIEZL
		LCALL	YS5MS
		MOV		A,#0CH
		LCALL	XIEZL
		LCALL	YS5MS
		MOV		A,#1
		LCALL	XIEZL
		LCALL	YS5MS
		RET
CSSZ:；闪烁设置	
		MOV		A,#8
		LCALL	XIEZL
		LCALL	YS800MS
		MOV		A,#0CH
		LCALL	XIEZL
		LCALL	YS800MS
		DJNZ	R4,CSSZ
		RET
XIEZL:；写指令		
		MOV		P0,A
		CLR		RS
		CLR		RW
		SETB	E
		LCALL	YS500MS
		CLR		E
		RET
XIESJ:；写数据	
		MOV		P0,A
		SETB	RS
		CLR		RW
		SETB	E
		LCALL	YS500MS
		CLR		E
		RET
XRWC:；为了让写入完成
		PUSH	ACC
XR1:		CLR		A
		MOVC	A,@A+DPTR
		JZ		XRC
		INC		DPTR
		LCALL	XIESJ
		JMP		XR1
XRC:	POP		ACC
		RET
YS5MS:	MOV		R6,#10
Y51:	MOV		R7,#249
		DJNZ	R7,$
		DJNZ	R6,Y51
		RET
YS125MS:
Y11:	MOV		R6,#250
Y12:	MOV		R7,#249
		DJNZ	R7,$
		DJNZ	R6,Y12
		DJNZ	R5,Y11
		RET
YS800MS:MOV		R5,#40
Y81:	MOV		R6,#100
Y82:	MOV		R7,#100
		DJNZ	R7,$
		DJNZ	R6,Y82
		DJNZ	R5,Y81	
		RET
YS500MS:
		MOV		R5,#5
Y01:	MOV		R6,#100
		DJNZ	R6,Y02
		DJNZ	R5,Y01
		RET
		END