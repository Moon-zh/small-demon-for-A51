;灯为3线可变7色LED
ORG	00H
AJMP	MAIN
ORG	30H
E	EQU	P2.6
GBZ	EQU	30H
MAIN:	MOV	SP,#80H
	MOV	GBZ,#0
	MOV	31H,#140

MAI:	MOV	A,GBZ
	MOV	B,#2
	MUL	AB
	MOV	DPTR,#TAB
	JMP	@A+DPTR
TAB:	AJMP	L1
	AJMP	L2
	AJMP	L3
	AJMP	L4
	AJMP	L5
	AJMP	L6
	AJMP	L7

L1:	CLR	P2.0
	SETB	P2.1
	SETB	P2.2
	LCALL	DA2
	INC	GBZ
	AJMP	MAI
	
L2:	SETB	P2.0
	CLR	P2.1
	SETB	P2.2
	LCALL	DA2
	INC	GBZ
	AJMP	MAI

L3:	SETB	P2.0
	SETB	P2.1
	CLR	P2.2
	LCALL	DA2
	INC	GBZ
	AJMP	MAI

L4:	CLR	P2.0
	CLR	P2.1
	SETB	P2.2
	LCALL	DA2
	INC	GBZ
	AJMP	MAI

L5:	CLR	P2.0
	SETB	P2.1
	CLR	P2.2
	LCALL	DA2
	INC	GBZ
	AJMP	MAI

L6:	SETB	P2.0
	CLR	P2.1
	CLR	P2.2
	LCALL	DA2
	INC	GBZ
	AJMP	MAI

L7:	CLR	P2.0
	CLR	P2.1
	CLR	P2.2
	LCALL	DA2
	MOV	GBZ,#0
 	AJMP	MAI

DA2:	MOV	P0,31H
	SETB	E
	CLR	E
	LCALL	YS01S
	INC	31H
	MOV	A,31H
	CJNE	A,#255,DA2
DA1:	DEC	31H
	MOV	P0,31H
	SETB	E
	CLR	E
	LCALL	YS01S
	MOV	A,31H
	CJNE	A,#140,DA1
	RET


YS01S:	MOV	R5,#1
YS2:	MOV	R6,#100
YS1:	MOV	R7,#60
	DJNZ	R7,$
	DJNZ	R6,YS1
	DJNZ	R5,YS2
	RET
	END		