CS2		EQU		P1.0
CS1		EQU		P1.1
E		EQU		P2.5
DS0		EQU		30H
DS1		EQU		31H
DS2		EQU		32H
DS3		EQU		33H
DS4		EQU		34H
DS5		EQU		35H
DS6		EQU		36H
DS7		EQU		37H
SMG		EQU		P0
		ORG		00H
		AJMP	MAIN
		ORG		23H
		AJMP	ZD
		ORG		30H
MAIN:	MOV		SP,#80H
		MOV		TMOD,#20H
		MOV		TH1,#0FDH
		MOV		TL1,#0FDH
		MOV		PCON,#00H
		MOV		SCON,#50H
		MOV		5EH,#0
		SETB	EA
		SETB	TR1
		SETB	ES
		CLR		TI
		MOV		DS0,#16
		MOV		DS1,#16
		MOV		DS2,#16
		MOV		DS3,#16
		MOV		DS4,#16
		MOV		DS5,#16
		MOV		DS6,#16
		MOV		DS7,#16
MAI:	MOV		A,5EH
		CJNE	A,#0H,L1
		LCALL	SMXS
		AJMP	MAI
L1:		MOV		A,5EH
		CJNE	A,#0E1H,L2
		MOV		R1,#DS5
L2:		MOV		A,5EH
		CJNE	A,#0E2H,L3
		MOV		R1,#DS5
L3:		MOV		A,5EH
		CJNE	A,#0E3H,L4
		MOV		R1,#DS5
L4:		MOV		A,5EH
		CJNE	A,#0E4H,L5
		MOV		R1,#DS5
L5:		MOV		A,5EH
		CJNE	A,#0E5H,L6
		MOV		R1,#DS5
L6:		MOV		A,5EH
		CJNE	A,#0E5H,L7
		MOV		R1,#DS5
L7:		MOV		A,5EH
		CJNE	A,#0E6H,L8
		MOV		R1,#DS5
L8:		MOV		A,5EH
		CJNE	A,#0E7H,L9
		MOV		R1,#DS5
L9:		MOV		A,5EH
		CJNE	A,#0E8H,L10
		MOV		R1,#DS5
L10:	MOV		A,5EH
		CJNE	A,#0E9H,L11
		MOV		R1,#DS5
L11:	MOV		A,5EH
		CJNE	A,#0AH,L12
		MOV		R1,#DS5
L12:	MOV		A,5EH
		CJNE	A,#0BH,L13
L13:	LCALL	SMXS
		AJMP	MAI
SMXS:	MOV		DPTR,#TAB
		MOV		R0,#8
		MOV		R1,#DS0
		MOV		R2,#0FEH
MA:		MOV		A,@R1
		MOVC	A,@A+DPTR
		MOV		SMG,A
		INC		R1
		CLR		E
		CLR		CS1
		SETB	E
		SETB	CS1
		MOV		A,R2
		MOV		SMG,A
		RL		A
		MOV		R2,A
		CLR		E
		CLR		CS2
		SETB	E
		SETB	CS2
		LCALL	YS
		LCALL	QP
		DJNZ	R0,MA
		RET
YS:		MOV		R3,#30
YS1:	MOV		R4,#40
		DJNZ	R4,$
		DJNZ	R3,YS1
		RET
QP:		MOV		SMG,0FFH
		CLR		E
		CLR		CS1
		SETB	E
		SETB	CS1
		CLR		E
		CLR		CS2
		SETB	E
		SETB	CS2
		RET
TAB:DB	0C0H,0F9H,0A4H,0B0H,99H,92H,82H,0F8H,80H,90H,88H,83H,0C6H,0A1H,86H,8EH,0FFH


SMZH:		SWAP		A
		ANL		A,#0FH
		MOV		@R1,A
		MOV		A,5EH
		ANL		A,#0FH
		DEC		R1
		MOV		@R1,A
		RET


ZD:		CLR		ES
		CLR		RI
		MOV		A,SBUF
		MOV		5EH,A
		MOV		R1,#DS5
		LCALL	SMZH
		MOV		A,5EH
		MOV		SBUF,A
		JNB		TI,$
		CLR		TI
		MOV		A,5EH
		CJNE	A,#0CCH,BJ
		JNB		RI,$
		CLR		RI
		MOV		A,SBUF
		MOV		5EH,A
		MOV		R1,#DS3
		LCALL	SMZH
		JNB		RI,$
		CLR		RI
		MOV		A,SBUF
		MOV		5EH,A
		MOV		R1,#DS1
		LCALL	SMZH
		SETB	ES
		RETI
BJ:		MOV		DS0,#16
		MOV		DS1,#16
		MOV		DS2,#16
		MOV		DS3,#16
		MOV		A,5EH
		CJNE	A,#0DDH,CC
		JNB		RI,$
		CLR		RI
		MOV		A,SBUF
		MOV		R1,#DS3
		MOV		5EH,A
		LCALL	SMZH
CC:		SETB	ES
		RETI
		END		