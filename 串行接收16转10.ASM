CS1	EQU	P1.0
CS2	EQU	P1.1
E	EQU	P1.2
SMG	EQU	P0
DS0	EQU	30H
DS1	EQU	31H
DS2	EQU	32H

	ORG	00H
	AJMP	MAIN
	;ORG	23H
	;AJMP	ZD
	ORG	30H
MAIN:	MOV	SP,#80H
	MOV	DS0,#0
	MOV	DS1,#0
	MOV	DS2,#0
	MOV	SCON,#50H
	MOV	TMOD,#20H
	MOV	TH1,#0FDH
	MOV	TL1,#0FDH
	SETB	EA
	;SETB	ET0
	SETB	TR1
	;SETB	ES
	LCALL	MY
MAI:	LCALL	SS
	MOV	A,40H
	LCALL	SMZH
	AJMP	MAI




SMZH:	PUSH	ACC
	ANL	A,#0FH
	MOV	DS0,A
	POP	ACC
	SWAP	A
	ANL	A,#0FH
	MOV	DS1,A
	RET





SS:	MOV	A,SBUF
S1:	PUSH	ACC
	LCALL	MY
	POP	ACC	
	JNB	RI,S1
	CLR	RI
	MOV	40H,A
	RET


MY:	MOV	DPTR,#TAB
	MOV	R1,#DS0
	MOV	R2,#0FEH
MA:	MOV	A,@R1
	MOVC	A,@A+DPTR
	INC	R1
	MOV	SMG,A
	CLR	E
	CLR	CS1
	SETB	E
	SETB	CS1
	MOV	A,R2
	MOV	SMG,A
	RL	A
	MOV	R2,A
	CLR	E
	CLR	CS2
	SETB	E
	SETB	CS2
	LCALL	SMYS
	LCALL	SMQP
	CJNE	R1,#33H,MA
	RET
SMYS:	MOV	R3,#0FFH
	DJNZ	R3,$
	RET
SMQP:	MOV	SMG,#0FFH
	CLR	E
	CLR	CS1
	SETB	E
	SETB	CS1
	CLR	E
	CLR	CS2
	SETB	E
	SETB	CS2
	RET
TAB:DB	0C0H,0F9H,0A4H,0B0H,99H,92H,82H,0F8H,80H,90H,88H,83H,0C6H,0A1H,86H,8EH,0BFH,8CH,86H,0AFH
	END