EXTRN CODE(lm35)
EXTRN DATA (wdu,dy,sw,gw,xs,gwy)
CS2		EQU		P1.0
CS1		EQU		P1.1
E		EQU		P1.2
RW		EQU		P1.3
RS		EQU		P1.4
COL3	EQU		P2.7
COL2	EQU		P2.6
COL1	EQU		P2.5
COL0	EQU		P2.4
ROW3	EQU		P2.3
ROW2	EQU		P2.2
ROW1	EQU		P2.1
ROW0	EQU		P2.0
XJ		EQU		30H
BZ		EQU		31H
ZS		EQU		32H
YD		EQU		33H
XD		EQU		34H
TB1		EQU		35H
TB2		EQU		36H
ZSZJ	EQU		37H
CISHU	EQU		38H
DS18B20	EQU		P3.0
SWS		EQU		62H
GWS		EQU		63H
XSS		EQU		64H
S1SXX	EQU		70H
S1SXG	EQU		72H
S1SXS	EQU		73H
S1XXX	EQU		74H
S1XXG	EQU		75H
S1XXS	EQU		76H
S2SXX	EQU		77H
S2SXG	EQU		78H
S2SXS	EQU		79H
S2XXS	EQU		7AH
S2XXG	EQU		7BH
S2XXX	EQU		7CH
		ORG		00H
		AJMP	MAIN
		ORG		30H
MAIN:	LCALL	LED_INIT
		CLR		COL0
		JB		ROW0,MAIN
		JNB		ROW0,$
		SETB	COL0
		MOV		SP,#80H
		MOV		2BH,#1
		MOV		60H,#0
		MOV		61H,#0
		MOV		62H,#0
		MOV		63H,#0
		MOV		64H,#0
		MOV		70H,#3
		MOV		72H,#6
		MOV		73H,#5
		MOV		74H,#3
		MOV		75H,#0
		MOV		76H,#0
		MOV		77H,#4
		MOV		78H,#0
		MOV		79H,#5
		MOV		7AH,#3
		MOV		7BH,#0
		MOV		7CH,#5
		MOV		2AH,#0
		LCALL	LED_INIT
		LCALL	CS
		LCALL	YS
		LCALL	LED_INIT		
M1:		SETB	P3.7
	
		LCALL	DS18B20WORK
		LCALL	BIN
		
		CLR		COL1
		JNB		ROW0,M2
		SETB	COL1
		
				
		LCALL	KSS
		lcall	lm35

		CLR		COL1
		JNB		ROW0,M2
		SETB	COL1
		LCALL	GW1

		MOV		A,62H
		CLR		C
		SUBB	A,S1XXX
		JC		DJ
		MOV		A,63H
		CLR		C
		SUBB	A,S1XXG
		JC		DJ

//		MOV		A,64H
//		CLR		C
//		SUBB	A,S1XXS
//		JC		DJ
		MOV		A,62H
		MOV		B,#10
		MUL		AB
		ADD		A,63H
		MOV		6AH,A

		MOV		A,S1SXX
		MOV		B,#10
		MUL		AB
		ADD		A,S1SXG	
		CLR		C
		SUBB	A,6AH
		JC		DJJ
//		AJMP	MK		
//
//DJJ1:	MOV		A,S1SXS		 
//		CLR		C
//		SUBB	A,64H
//		JC		DJJ
		CLR		COL1
		JNB		ROW0,M2
		SETB	COL1
MK:
		MOV		A,SW
		CLR		C
		SUBB	A,S2XXS
		JC		DJ1
		MOV		A,GW
		CLR		C
		SUBB	A,S2XXG
		JC		DJ1
//		MOV		A,XS
//		CLR		C
//		SUBB	A,S2XXX
//		JC		DJ1
		
		MOV		A,SW
		MOV		B,#10
		MUL		AB
		ADD		A,GW
		MOV		6BH,A
		MOV		A,S2SXX
		MOV		B,#10
		MUL		AB
		ADD		A,S2SXG
		CLR		C
		SUBB	A,6BH
		JC		DJ11
//DJ111:	MOV		A,S2SXS
//		CLR		C
//		SUBB	A,XS
//		JC		DJ11
		CLR		COL1
		JNB		ROW0,M2
		SETB	COL1

MC:		AJMP	M1
DJ:		CLR		P3.1
		AJMP	MK
DJJ:	SETB	P3.1
		AJMP	MK
DJ1:	CLR		P3.5
		AJMP	MC
DJ11:	SETB	P3.5
		AJMP	MC


M2:		SETB	P3.1
		SETB	P3.5
		JNB		ROW0,$
		SETB	COL1
		LCALL	LED_INIT
		LCALL	SZS
		LCALL	GW2
		LCALL	GW22
		LCALL	GW222
		LCALL	GW2222	
		
M3:		;MOV		B,#250
JK:		;MOV		R3,#100
KJ:		CLR		COL1
		JB		ROW0,M133
		JNB		ROW0,$
		SETB	COL1
		CLR		P3.7
		AJMP	MM3
YS05:	MOV		R3,#3
YS052:	MOV		R4,#250
YS051:	MOV		R5,#250
		DJNZ	R5,$
		DJNZ	R4,YS051
		DJNZ	R3,YS052
		RET





SSZZ:	AJMP	SZ
		
M133:	;DJNZ	R3,KJ	  
		;DJNZ	B,JK
		SETB	COL0
		SETB	COL1
		SETB	COL2
		SETB	COL3
		LCALL	GW222
		LCALL	GW2222
		LCALL	GW22
		MOV		2AH,#1
		LCALL	GW2
		MOV		2AH,#0
		LCALL	PD

		CLR		COL0
		JNB		ROW3,SSZZ
		SETB	COL0
		CLR		COL2		
		JNB		ROW0,W1
		SETB	COL2
		CLR		COL3
		JNB		ROW0,T2
		SETB	COL3
		CLR		COL0
		JNB		ROW1,T3
		SETB	COL0
		LCALL	YS05
		LCALL	GW2
		LCALL	YS05
PD2:	MOV		A,2BH
		CJNE	A,#1,PD21
		AJMP	M133
PD21:	CJNE	A,#2,PD22
		AJMP	SZ
PD22:	CJNE	A,#3,PD23
		AJMP	MM3
PD23:	CJNE	A,#4,PD24
		AJMP	SZ1
PD24:
		AJMP	M3
T3:		JNB		ROW1,$
		SETB	COL0
		LCALL	LED_INIT
		AJMP	M1
W1:		JNB		ROW0,$
		SETB	COL2
		INC		S1SXS
		INC		S1SXS
		INC		S1SXS
		INC		S1SXS
		INC		S1SXS
		MOV		A,S1SXS
		CJNE	A,#10,T11
		MOV		S1SXS,#0
		INC		S1SXG
		MOV		A,S1SXG
		CJNE	A,#10,T11
		MOV		S1SXG,#0
		INC		S1SXX
T11:	MOV		2AH,#1
		LCALL	GW2
		MOV		2AH,#0
		AJMP	M3
T2:		JNB		ROW0,$
		SETB	COL3
		DEC		S1SXS
		DEC		S1SXS		
		DEC		S1SXS
		DEC		S1SXS
		DEC		S1SXS
		MOV		A,S1SXS
		CJNE	A,#251,T22
		MOV		S1SXS,#5
		DEC		S1SXG
		MOV		A,S1SXG
		CJNE	A,#255,T22
		MOV		S1SXG,#9
		DEC		S1SXX
T22:	MOV		2AH,#1
		LCALL	GW2
		MOV		2AH,#0
M33:	JNB		ROW3,$
		SETB	COL0
		AJMP	M3
		
				
SZ:		JNB		ROW3,$
		SETB	COL0
		SETB	COL1
		SETB	COL2
		SETB	COL3
		LCALL	GW222
		LCALL	GW2222
		LCALL	GW2
		MOV		2AH,#1
		LCALL	GW22
		MOV		2AH,#0

		CLR		COL2		
		JNB		ROW0,T4
		SETB	COL2
		CLR		COL3
		JNB		ROW0,T5
		SETB	COL3
		CLR		COL0
		JNB		ROW1,T6
		SETB	COL0
		CLR		COL0
		JNB		ROW3,M33
		SETB	COL0
		LCALL	YS05
		LCALL	GW22
		LCALL	YS05
		LCALL	PD
		MOV		A,2BH
		CJNE	A,#1,PD211
		AJMP	M133
PD211:	CJNE	A,#2,PD221
		AJMP	SZ
PD221:	CJNE	A,#3,PD231
		AJMP	MM3
PD231:	CJNE	A,#4,PD241
		AJMP	SZ1
PD241:	
		AJMP	SZ

T6:		JNB		ROW1,$
		SETB	COL0
		LCALL	LED_INIT
		AJMP	M1
T4:		JNB		ROW0,$
		SETB	COL2
		INC		S1XXS
		INC		S1XXS
		INC		S1XXS
		INC		S1XXS
		INC		S1XXS
		MOV		A,S1XXS
		CJNE	A,#10,T44
		MOV		S1XXS,#0
		INC		S1XXG
		MOV		A,S1XXG
		CJNE	A,#10,T44
		MOV		S1XXG,#0
		INC		S1XXX
T44:	MOV		2AH,#1
		LCALL	GW22
		MOV		2AH,#0
		AJMP	SZ
T5:		JNB		ROW0,$
		SETB	COL3
		DEC		S1XXS
		DEC		S1XXS
		DEC		S1XXS
		DEC		S1XXS
		DEC		S1XXS
		MOV		A,S1XXS
		CJNE	A,#251,T55
		MOV		S1XXS,#5
		DEC		S1XXG
		MOV		A,S1XXG
		CJNE	A,#255,T55
		MOV		S1XXG,#9
		DEC		S1XXX
T55:	MOV		2AH,#1
		LCALL	GW22
		MOV		2AH,#0
		AJMP	SZ
MM3:	JNB		ROW0,$
		SETB	COL0
		SETB	COL1
		SETB	COL2
		SETB	COL3
		LCALL	GW22
		LCALL	GW2
		MOV		2AH,#1
		LCALL	GW222
		MOV		2AH,#0
		LCALL	GW2222

		CLR		COL0
		JNB		ROW3,SSZ1
		SETB	COL0
		CLR		COL2		
		JNB		ROW0,W11
		SETB	COL2
		CLR		COL3
		JNB		ROW0,T21
		SETB	COL3
		CLR		COL0
		JNB		ROW1,T31
		SETB	COL0
		LCALL	YS05
		LCALL	GW222
		LCALL	YS05
		LCALL	PD
		MOV		A,2BH
		CJNE	A,#1,PD212
		AJMP	M133
PD212:	CJNE	A,#2,PD222
		AJMP	SZ
PD222:	CJNE	A,#3,PD232
		AJMP	MM3
PD232:	CJNE	A,#4,PD242
		AJMP	SZ1
PD242:
		AJMP	MM3
SSZ1:	AJMP	SZ1
T31:	SETB	COL0
		CLR		P3.7
		LCALL	LED_INIT
		AJMP	M1
W11:	JNB		ROW0,$
		INC		S2SXS
		INC		S2SXS
		INC		S2SXS
		INC		S2SXS
		INC		S2SXS
		MOV		A,S2SXS
		CJNE	A,#10,T111
		MOV		S2SXS,#0
		INC		S2SXG
		MOV		A,S2SXG
		CJNE	A,#10,T111
		MOV		S2SXG,#0
		INC		S2SXX
T111:	MOV		2AH,#1
		LCALL	GW222
		MOV		2AH,#0
		JNB		ROW0,$
		AJMP	MM3
T21:	JNB		ROW0,$
		DEC		S2SXS
		DEC		S2SXS		
		DEC		S2SXS
		DEC		S2SXS
		DEC		S2SXS
		MOV		A,S2SXS
		CJNE	A,#251,T221
		MOV		S2SXS,#5
		DEC		S2SXG
		MOV		A,S2SXG
		CJNE	A,#255,T221
		MOV		S2SXG,#9
		DEC		S2SXX
T221:	MOV		2AH,#1
		LCALL	GW222
		MOV		2AH,#0
		JNB		ROW0,$
M331:	JNB		ROW3,$
		SETB	COL0	
		AJMP	MM3
		
				
SZ1:	JNB		ROW3,$
		SETB	COL0
		SETB	COL1
		SETB	COL2
		SETB	COL3
		LCALL	GW2
		LCALL	GW22
		LCALL	GW222
		MOV		2AH,#1
		LCALL	GW2222
		MOV		2AH,#0

		SETB	COL0
		CLR		COL2		
		JNB		ROW0,T41
		SETB	COL2
		CLR		COL3
		JNB		ROW0,T51
		SETB	COL3
		CLR		COL0
		JNB		ROW1,T61
		SETB	COL0
		CLR		COL0
		JNB		ROW3,M331
		SETB	COL0
		LCALL	YS05
		LCALL	GW2222
		LCALL	YS05
		LCALL	PD
		MOV		A,2BH
		CJNE	A,#1,PD213
		AJMP	M133
PD213:	CJNE	A,#2,PD223
		AJMP	SZ
PD223:	CJNE	A,#3,PD233
		AJMP	MM3
PD233:	CJNE	A,#4,PD243
		AJMP	SZ1
PD243:
		AJMP	SZ1

T61:	SETB	COL0
		LCALL	LED_INIT
		AJMP	M1
T41:	JNB		ROW0,$
		SETB	COL2
		INC		S2XXX
		INC		S2XXX
		INC		S2XXX
		INC		S2XXX
		INC		S2XXX
		MOV		A,S2XXX
		CJNE	A,#10,T441
		MOV		S2XXX,#0
		INC		S2XXG
		MOV		A,S2XXG
		CJNE	A,#10,T441
		MOV		S2XXG,#0
		INC		S2XXS
T441:	MOV		2AH,#1
		LCALL	GW2222
		MOV		2AH,#0
		AJMP	SZ1
T51:	JNB		ROW0,$
		SETB	COL3
		DEC		S2XXX
		DEC		S2XXX
		DEC		S2XXX
		DEC		S2XXX
		DEC		S2XXX
		MOV		A,S2XXX
		CJNE	A,#251,T551
		MOV		S2XXX,#5
		DEC		S2XXG
		MOV		A,S2XXG
		CJNE	A,#255,T551
		MOV		S2XXG,#9
		DEC		S2XXS
T551:	MOV		2AH,#1
		LCALL	GW2222
		MOV		2AH,#0
		AJMP	SZ1
		
PD:		CLR		COL3
		JNB		ROW2,YY
		SETB	COL3
		CLR		COL2
		JNB		ROW3,XY
		SETB	COL2
		CLR		COL1
		JNB		ROW2,ZY
		SETB	COL1
		CLR		COL2
		JNB		ROW1,SY
		SETB	COL2
		RET
YY:		JNB		ROW2,$
		SETB	COL3
		INC		2BH
		INC		2BH
		MOV		A,2BH
		CJNE	A,#5,YC
		MOV		2BH,#1
YC:		CJNE	A,#6,YYC
		MOV		2BH,#2
YYC:	AJMP	PD
XY:		JNB		ROW3,$
		SETB	COL2
		INC		2BH
		MOV		A,2BH
		CJNE	A,#5,XC
		MOV		2BH,#3
XC:		CJNE	A,#3,XXC
		MOV		2BH,#1
XXC:	AJMP	PD
ZY:		JNB		ROW2,$
		SETB	COL1
		DEC		2BH
		DEC		2BH
		MOV		A,2BH
		CJNE	A,#255,ZC
		MOV		2BH,#3
ZC:		CJNE	A,#0,ZCC
		MOV		2BH,#4
ZCC:	AJMP	PD
SY:		JNB		ROW1,$
		SETB	COL2
		DEC		2BH
		MOV		A,2BH
		CJNE	A,#0,SC
		MOV		2BH,#4
SC:		AJMP	PD		
								
YS:		MOV		R1,#24
YS2:	MOV		R2,#250
YS1:	MOV		R3,#250
		DJNZ	R3,$
		DJNZ	R2,YS1
		DJNZ	R1,YS2
		RET

GW1:	MOV		DPTR,#TABSZ

		MOV		A,62H
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,62H
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0B8H
		MOV		YD,#40H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		
		MOV		A,SW
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,SW
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#40H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
	
		MOV		A,63H
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,63H
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0B8H
		MOV		YD,#47H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		
		MOV		A,GW
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,GW
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#47H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		

		MOV		A,64H
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,64H
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0B8H
		MOV		YD,#54H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX


		MOV		A,XS
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,XS
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#54H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX	   
		RET
GW2:	MOV		DPTR,#TABSZ
		MOV		A,S1SXX
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S1SXX
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#5DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		
		MOV		A,S1SXG
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S1SXG
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#63H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		
		MOV		A,S1SXS
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S1SXS
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#6DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		RET
GW22:	MOV		DPTR,#TABSZ
		MOV		A,S1XXX
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S1XXX
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BCH
		MOV		YD,#5DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS1
		CLR		CS2
		LCALL	XIECX

		MOV		A,S1XXG
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S1XXG
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BCH
		MOV		YD,#63H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS1
		CLR		CS2
		LCALL	XIECX

		MOV		A,S1XXS
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S1XXS
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BCH
		MOV		YD,#6DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		RET

GW222:	MOV		DPTR,#TABSZ
		MOV		A,S2SXX
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S2SXX
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#5DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX

		MOV		A,S2SXG
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S2SXG
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#63H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX


		MOV		A,S2SXS
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S2SXS
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BAH
		MOV		YD,#6DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		RET
GW2222:	MOV		DPTR,#TABSZ	
		MOV		A,S2XXS
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S2XXS
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BCH
		MOV		YD,#5DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX

		MOV		A,S2XXG
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S2XXG
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BCH
		MOV		YD,#63H
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX

		MOV		A,S2XXX
		MOV		B,#12
		MUL		AB
		MOV		TB1,A
		MOV		A,S2XXX
		MOV		B,#2
		MUL		AB
		MOV		BZ,A
		MOV		XD,#0BCH
		MOV		YD,#6DH
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		RET
cs:		MOV		DPTR,#TAB0
		MOV		XD,#0BBH
		MOV		YD,#52H
		MOV		TB1,#0
		MOV		TB2,#16
		MOV		ZS,#3
		MOV		BZ,#0
		MOV		CISHU,#16
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		MOV		DPTR,#TAB01
		MOV		XD,#0BBH
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#16
		MOV		ZS,#3
		MOV		BZ,#0
		MOV		CISHU,#16
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		RET
KSS:	
		MOV		DPTR,#XSD
		MOV		XD,#0B8H
		MOV		YD,#4CH
		MOV		TB1,#0
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		MOV		XD,#0BAH
		MOV		YD,#4CH
		MOV		TB1,#0
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#6
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		MOV		DPTR,#TAB1
		MOV		XD,#0B8H
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#16
		MOV		ZS,#4
		MOV		BZ,#0
		MOV		CISHU,#16
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		MOV		DPTR,#TAB2
		MOV		XD,#0BAH
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#16
		MOV		ZS,#4
		MOV		BZ,#0
		MOV		CISHU,#16
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		MOV		DPTR,#DIAN
		MOV		XD,#0B8H
		MOV		YD,#7AH
		MOV		TB1,#0
		MOV		TB2,#8
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#8
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		MOV		DPTR,#DIAN
		MOV		XD,#0BAH
		MOV		YD,#7AH
		MOV		TB1,#0
		MOV		TB2,#8
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#8
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		MOV		DPTR,#TABC
		MOV		XD,#0B8H
		MOV		YD,#60H
		MOV		TB1,#0
		MOV		TB2,#8
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#8
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		MOV		DPTR,#TABC
		MOV		XD,#0BAH
		MOV		YD,#60H
		MOV		TB1,#0
		MOV		TB2,#8
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#8
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		RET
SZS:	MOV		DPTR,#XSD
		MOV		XD,#0BCH
		MOV		YD,#6BH
		MOV		TB1,#0
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#6
		SETB	CS2
		SETB	CS1
		LCALL	XIECX
		MOV		XD,#0BAH
		MOV		YD,#6BH
		MOV		TB1,#0
		MOV		TB2,#6
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#6
		SETB	CS2
		SETB	CS1
		LCALL	XIECX
		MOV		DPTR,#TAB1
		MOV		XD,#0B8H
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#16
		MOV		ZS,#4
		MOV		BZ,#0
		MOV		CISHU,#16
		SETB	CS1
		CLR		CS2
		LCALL	XIECX
		MOV		DPTR,#TAB2
		MOV		XD,#0B8H
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#16
		MOV		ZS,#4
		MOV		BZ,#0
		MOV		CISHU,#16
		SETB	CS2
		CLR		CS1
		LCALL	XIECX
		MOV		DPTR,#TABS
		MOV		XD,#0BAH
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#12
		MOV		ZS,#2
		MOV		BZ,#0
		MOV		CISHU,#12
		SETB	CS1
		SETB	CS2
		LCALL	XIECX
		MOV		DPTR,#TABX
		MOV		XD,#0BCH
		MOV		YD,#40H
		MOV		TB1,#0
		MOV		TB2,#12
		MOV		ZS,#2
		MOV		BZ,#0
		MOV		CISHU,#12
		SETB	CS1
		SETB	CS2
		LCALL	XIECX
		MOV		DPTR,#TABC
		MOV		XD,#0BAH
		MOV		YD,#77H
		MOV		TB1,#0
		MOV		TB2,#8
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#8
		SETB	CS1
		SETB	CS2
		LCALL	XIECX
		MOV		DPTR,#TABC
		MOV		XD,#0BCH
		MOV		YD,#77H
		MOV		TB1,#0
		MOV		TB2,#8
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#8
		SETB	CS1
		SETB	CS2
		LCALL	XIECX
		MOV		DPTR,#TABM
		MOV		XD,#0BAH
		MOV		YD,#57H
		MOV		TB1,#0
		MOV		TB2,#11
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#11
		SETB	CS1
		SETB	CS2
		LCALL	XIECX
		MOV		XD,#0BCH
		MOV		YD,#57H
		MOV		TB1,#0
		MOV		TB2,#11
		MOV		ZS,#1
		MOV		BZ,#0
		MOV		CISHU,#11
		SETB	CS1
		SETB	CS2
		LCALL	XIECX
		RET


XIECX:	MOV		A,#0C0H
		LCALL	XIEZL
		MOV		XJ,#2
		MOV		50H,XJ
		MOV		40H,#1
		MOV		ZSZJ,ZS
TU1:	MOV		A,XD
		LCALL	XIEZL
		MOV		A,YD
		LCALL	XIEZL
		MOV		51H,CISHU
TU2:	MOV		A,TB1
		MOVC	A,@A+DPTR
		INC		TB1
		MOV		R0,2AH
		CJNE	R0,#1,TU22
		CPL		A
TU22:	LCALL	XIESJ
		DJNZ	51H,TU2
		MOV		A,ZS
		CJNE	A,#1,TU3
		AJMP	TU4
TU3:	MOV		A,50H
		MOV		B,40H
		MUL		AB
		ADD		A,BZ
		MOV		B,CISHU
		MUL		AB
		MOV		TB1,A
TU4:	MOV		51H,CISHU
		INC		40H
		DJNZ	ZSZJ,TU2
		INC		XD
		MOV		40H,#1
		MOV		ZSZJ,ZS
		INC		BZ
		MOV		A,BZ
		MOV		B,TB2
		MUL		AB
		MOV		TB1,A
		DJNZ	XJ,TU1
		RET
LED_INIT:
		SETB	CS1
		CLR		CS2
		MOV		A,#3FH
		LCALL	XIEZL
		LCALL	QP
		CLR		CS1
		SETB	CS2
		MOV		A,#3FH
		LCALL	XIEZL
		LCALL	QP
		RET

QP:		MOV		XJ,#8
		MOV		XD,#0B8H
QP1:	MOV		A,XD
		LCALL	XIEZL
		MOV		A,#40H
		LCALL	XIEZL	
		MOV		CISHU,#64
QP2:	MOV		A,#0H
		LCALL	XIESJ
		DJNZ	CISHU,QP2
		INC		XD
		DJNZ	XJ,QP1
		RET

XIEZL:	CLR		E
		CLR		RW
		CLR		RS
		MOV		P0,A
		SETB	E
		CLR		E
		RET

XIESJ:	CLR		E
		CLR		RW
		SETB	RS
		MOV		P0,A
		SETB	E
		CLR		E
		RET
CS18B20:CLR		DS18B20
		MOV		R0,#250
		DJNZ	R0,$
		SETB	DS18B20
		MOV		R0,#35
		DJNZ	R0,$
		JNB		DS18B20,$
		SETB	DS18B20
		MOV		R0,#50
		DJNZ	R0,$
		RET
E18B20:	MOV		B,#08H
E1:		RRC		A
		CLR		DS18B20
		NOP
		NOP
		NOP
		NOP
		NOP
		MOV		DS18B20,C
		MOV		R0,#28
		DJNZ	R0,$
		SETB	DS18B20
		DJNZ	B,E1
		RET
RD18B20:MOV		B,#08H
		MOV		A,#00H
		CLR		C
RD1:	CLR		DS18B20
		NOP
		NOP
		NOP
		NOP
		NOP
		SETB	DS18B20
		MOV		C,DS18B20
		RRC		A
		MOV		R0,#23
		DJNZ	R0,$
		SETB	DS18B20
		DJNZ	B,RD1
		RET
DS18B20WORK:
		JNB		DS18B20,OUT
		LCALL	CS18B20
		MOV		A,#0CCH
		LCALL	E18B20
		MOV		A,#0BEH
		LCALL	E18B20
		LCALL	RD18B20
		MOV		B,A
		SWAP	A
		ANL		A,#0FH
		MOV		60H,A
		MOV		A,B
		ANL		A,#0FH
		MOV		61H,A
		LCALL	RD18B20
		RL		A
		RL		A
		RL		A
		RL		A
		ADD		A,60H
		MOV		60H,A
		LCALL	YS
		LCALL	CS18B20
		MOV		A,#0CCH
		LCALL	E18B20
		MOV		A,#44H
		LCALL	E18B20
OUT:	RET
BIN:	MOV		A,60H
		MOV		B,#10
		DIV		AB
		MOV		62H,A
		MOV		63H,B
		MOV		A,61H
		MOV		DPTR,#TABSS
		MOVC	A,@A+DPTR
		MOV		B,#10
		DIV		AB
		MOV		64H,A
		MOV		65H,B
		RET
TABSS:DB	00,06,13,19,25,31
     DB	38,44,50,56,62,69
     DB	75,81,88,94
TAB0:;--  文字:  两  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  002H,0F2H,012H,012H,012H,0FEH,092H,012H,012H,0FEH,012H,012H,012H,0FBH,012H,000H
DB  000H,07FH,008H,004H,003H,000H,010H,009H,006H,001H,001H,026H,040H,03FH,000H,000H

;--  文字:  室  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,010H,02CH,024H,0A4H,064H,025H,026H,024H,024H,0A4H,024H,034H,02CH,004H,000H
DB  040H,040H,048H,049H,049H,049H,049H,07FH,049H,049H,049H,04BH,048H,040H,040H,000H

;--  文字:  温  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  010H,021H,086H,070H,000H,07EH,04AH,04AH,04AH,04AH,04AH,07EH,000H,000H,000H,000H
DB  002H,0FEH,001H,040H,07FH,041H,041H,07FH,041H,041H,07FH,041H,041H,07FH,040H,000H
TAB01:
;--  文字:  度  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,000H,0FCH,004H,024H,024H,0FCH,0A5H,0A6H,0A4H,0FCH,024H,024H,024H,004H,000H
DB  080H,060H,01FH,080H,080H,042H,046H,02AH,012H,012H,02AH,026H,042H,0C0H,040H,000H

;--  文字:  控  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  008H,008H,008H,0FFH,088H,048H,000H,098H,048H,028H,00AH,02CH,048H,0D8H,008H,000H
DB  002H,042H,081H,07FH,000H,000H,040H,042H,042H,042H,07EH,042H,042H,042H,040H,000H

;--  文字:  制  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,050H,04FH,04AH,048H,0FFH,048H,048H,048H,000H,0FCH,000H,000H,0FFH,000H,000H
DB  000H,000H,03FH,001H,001H,0FFH,021H,061H,03FH,000H,00FH,040H,080H,07FH,000H,000H


TAB1:	;--  文字:  工  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,000H,002H,002H,002H,002H,002H,0FEH,002H,002H,002H,002H,002H,002H,000H,000H
DB  020H,020H,020H,020H,020H,020H,020H,03FH,020H,020H,020H,020H,020H,020H,020H,000H

;--  文字:  作  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  080H,040H,020H,0F8H,007H,022H,018H,00CH,0FBH,048H,048H,048H,068H,048H,008H,000H
DB  000H,000H,000H,0FFH,000H,000H,000H,000H,0FFH,004H,004H,004H,004H,006H,004H,000H

;--  文字:  室  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,010H,02CH,024H,0A4H,064H,025H,026H,024H,024H,0A4H,024H,034H,02CH,004H,000H
DB  040H,040H,048H,049H,049H,049H,049H,07FH,049H,049H,049H,04BH,048H,040H,040H,000H

;--  文字:  1  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,010H,010H,0F8H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
DB  000H,020H,020H,03FH,020H,020H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
TAB2:
;--  文字:  工  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,000H,002H,002H,002H,002H,002H,0FEH,002H,002H,002H,002H,002H,002H,000H,000H
DB  020H,020H,020H,020H,020H,020H,020H,03FH,020H,020H,020H,020H,020H,020H,020H,000H

;--  文字:  作  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  080H,040H,020H,0F8H,007H,022H,018H,00CH,0FBH,048H,048H,048H,068H,048H,008H,000H
DB  000H,000H,000H,0FFH,000H,000H,000H,000H,0FFH,004H,004H,004H,004H,006H,004H,000H

;--  文字:  室  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,010H,02CH,024H,0A4H,064H,025H,026H,024H,024H,0A4H,024H,034H,02CH,004H,000H
DB  040H,040H,048H,049H,049H,049H,049H,07FH,049H,049H,049H,04BH,048H,040H,040H,000H

;--  文字:  2  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000H,070H,008H,008H,008H,088H,070H,000H,000H,000H,000H,000H,000H,000H,000H,000H
DB  000H,030H,028H,024H,022H,021H,030H,000H,000H,000H,000H,000H,000H,000H,000H,000H
DIAN:;--  文字:  :  --
;--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  000H,000H,000H,0C0H,0C0H,000H,000H,000H,000H,000H,000H,030H,030H,000H,000H,000H
TABC:;--  文字:  C  --
;--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --
DB  0C7H,035H,00FH,008H,008H,008H,038H,000H,007H,018H,020H,020H,020H,010H,008H,000H
TABS:;--  文字:  上  --
;--  宋体9;  此字体下对应的点阵为：宽x高=12x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=12x16  --;
DB  000H,000H,000H,000H,000H,0FFH,010H,010H,010H,010H,000H,000H,004H,004H,004H,004H
DB  004H,007H,004H,004H,004H,004H,004H,000H

;--  文字:  限  --
;--  宋体9;  此字体下对应的点阵为：宽x高=12x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=12x16  --;
DB  0FFH,081H,099H,0E7H,000H,0FFH,025H,0E5H,025H,0BFH,040H,020H,007H,000H,000H,000H
DB  000H,007H,004H,002H,001H,002H,004H,002H

TABX:;--  文字:  下  --
;--  宋体9;  此字体下对应的点阵为：宽x高=12x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=12x16  --;
DB  002H,002H,002H,002H,002H,0FEH,012H,012H,022H,043H,002H,000H,000H,000H,000H,000H
DB  000H,007H,000H,000H,000H,000H,000H,000H

;--  文字:  限  --
;--  宋体9;  此字体下对应的点阵为：宽x高=12x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=12x16  --;
DB  0FFH,081H,099H,0E7H,000H,0FFH,025H,0E5H,025H,0BFH,040H,020H,007H,000H,000H,000H
DB  000H,007H,004H,002H,001H,002H,004H,002H
TABSZ:;--  文字:  0  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  0F8H,004H,004H,004H,0F8H,000H,001H,002H,002H,002H,001H,000H
;--  文字:  1  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  000H,008H,0FCH,000H,000H,000H,000H,002H,003H,002H,000H,000H

;--  文字:  2  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  018H,084H,044H,024H,018H,000H,003H,002H,002H,002H,002H,000H

;--  文字:  3  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  008H,004H,024H,024H,0D8H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  4  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  040H,0B0H,088H,0FCH,080H,000H,000H,000H,000H,003H,002H,000H

;--  文字:  5  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  03CH,024H,024H,024H,0C4H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  6  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  0F8H,024H,024H,02CH,0C0H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  7  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  00CH,004H,0E4H,01CH,004H,000H,000H,000H,003H,000H,000H,000H

;--  文字:  8  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  0D8H,024H,024H,024H,0D8H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  9  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  038H,044H,044H,044H,0F8H,000H,000H,003H,002H,002H,001H,000H
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  0F8H,004H,004H,004H,0F8H,000H,001H,002H,002H,002H,001H,000H
;--  文字:  1  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  000H,008H,0FCH,000H,000H,000H,000H,002H,003H,002H,000H,000H

;--  文字:  2  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  018H,084H,044H,024H,018H,000H,003H,002H,002H,002H,002H,000H

;--  文字:  3  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  008H,004H,024H,024H,0D8H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  4  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  040H,0B0H,088H,0FCH,080H,000H,000H,000H,000H,003H,002H,000H

;--  文字:  5  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  03CH,024H,024H,024H,0C4H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  6  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  0F8H,024H,024H,02CH,0C0H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  7  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  00CH,004H,0E4H,01CH,004H,000H,000H,000H,003H,000H,000H,000H

;--  文字:  8  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  0D8H,024H,024H,024H,0D8H,000H,001H,002H,002H,002H,001H,000H

;--  文字:  9  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
;--  高度不是8的倍数，现调整为：宽度x高度=6x16  --;
DB  038H,044H,044H,044H,0F8H,000H,000H,003H,002H,002H,001H,000H



XSD:;--  文字:  .  --
;--  宋体9;  此字体下对应的点阵为：宽x高=6x12   --
DB  000H,000H,000H,000H,000H,000H,000H,002H,000H,000H,000H,000H
TABM:;--  文字:  ：  --
;--  宋体8;  此字体下对应的点阵为：宽x高=11x11   --
;--  高度不是8的倍数，现调整为：宽度x高度=11x16  --;
DB  000H,060H,060H,000H,000H,000H,000H,000H,000H,000H,000H,000H,003H,003H,000H,000H
DB  000H,000H,000H,000H,000H,000H
		END