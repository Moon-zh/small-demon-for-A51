		ORG		00H
		AJMP	MAIN
		ORG		30H
MAIN:
		SETB	P1.0
		SETB	P1.1
		SETB	P1.2
		SETB	P1.3
		MOV		R3,#8
YS2:	MOV		R4,#0FFH
YS1:	MOV		R5,#0FFH
		DJNZ	R5,$
		DJNZ	R4,YS1
		DJNZ	R3,YS2
		LCALL	INIT_8255
		MOV		A,#0FFH
		LCALL	PDB
		LCALL	PDCH
SD:
MAI:	LCALL	INIT_8255
		MOV		A,#0FEH
		LCALL	PDCH
		LCALL	PDCL
		LCALL	YSS
		LCALL	PDCL
		JNB		ACC.7,M1
		JNB		ACC.6,M2
		JNB		ACC.5,M3
		JNB		ACC.4,M4
		MOV		A,#0FDH
		LCALL	PDCH
		LCALL	PDCL
		LCALL	YSS
		LCALL	PDCL
		JNB		ACC.7,M5
		JNB		ACC.6,M6
		LCALL	PDA
		JNB		ACC.2,M1T
		JNB		ACC.0,M2T
		AJMP	MAI
M1:		LCALL	PDA
		JNB		ACC.2,M1T
		SETB	P1.1
		CLR		P1.0
M1C:	AJMP	MAI
M1T:	SETB	P1.0
		AJMP	M1C
M2:		LCALL	PDA
		JNB		ACC.0,M2T
		SETB	P1.0
		CLR		P1.1
		LCALL	PDB
		AJMP	M1C
M2T:	SETB	P1.1
		AJMP	M1C
M3:		CLR		P1.2
		SETB	P1.0
		SETB	P1.1
		AJMP	M1C
M4:		SETB	P1.2
		SETB	P1.0
		SETB	P1.1
		AJMP	M1C
M5:		LCALL	PDA
		JNB		ACC.2,M5T
		CLR		P1.3
M5T:	AJMP	M1C
M6:		SETB	P1.3
		AJMP	M1C
INIT_8255:
		MOV		DPTR,#0F3FFH
		MOV		A,#98H
		MOVX	@DPTR,A
		RET
PDCH:	MOV		DPTR,#0FEFFH
		MOVX	@DPTR,A
		RET
PDCL:	MOV		DPTR,#0FEFFH
		MOVX	A,@DPTR
		RET
PDA:	MOV		DPTR,#0FCFFH
		MOVX	A,@DPTR
		RET
PDB:	MOV		DPTR,#0FDFFH
		MOVX	@DPTR,A
		RET
YSS:	MOV		R3,#100
YSS1:	MOV		R4,#50
		DJNZ	R4,$
		DJNZ	R3,YSS1
		RET
		END